# For the most complete test of L3MuonProducer, use the configuration
# file found in "HLTrigger/Muon/test/HLTOnlyReco.cfg" 
#
# This configuration file allows the test of L3MuonProducer using
# OFFLINE standAloneMuons instead of the full ONLINE reconstruction

process L3Muon = {
    
  # Event source
    source = PoolSource{
	untracked vstring fileNames ={
            'rfio:/castor/cern.ch/user/c/cliu/singlemum_pt100_1.root'
	}
    }
    untracked PSet maxEvents = {untracked int32 input = 10 }
        
    include "Configuration/StandardSequences/data/FakeConditions.cff"

    include "TrackingTools/Configuration/data/TrackingTools.cff"
    include "RecoLocalTracker/Configuration/data/RecoLocalTracker.cff"
    
# StandAloneReco: StandAloneMuon tracks and trajectories must be in the event!
# This presents two choices:
# 1 - Do standAlone reconstruction
# 2 - Use StandAloneMuons already in the event and just add the trajectory
#
# Option 1
    include "RecoLocalMuon/Configuration/data/RecoLocalMuon.cff"
    include "RecoMuon/Configuration/data/RecoMuon.cff"
    sequence muonReco = { muonlocalreco, MuonSeed, standAloneMuons }
#
# Option 2
#    include "TrackingTools/TrackRefitter/data/standAloneMuonTrajectories.cff"
#    replace standAloneMuons.Tracks = standAloneMuons:UpdatedAtVtx
#    sequence muonStandAloneReco = { standAloneMuons }
#    include "RecoMuon/GlobalMuonProducer/data/GlobalMuonProducer.cff"
#    sequence muonReco = { muonStandAloneReco }
        
    include "RecoMuon/L3MuonProducer/data/L3Muons.cff"
    replace L3Muons.MuonCollectionLabel = standAloneMuons:UpdatedAtVtx
    
  # Output
    module out = PoolOutputModule {
	untracked string fileName ="L3Muons.root"
    }
    
  # Path
    path p = { trackerlocalreco, muonReco, L3Muons }
    endpath this_is_the_end = { out }
    
}
